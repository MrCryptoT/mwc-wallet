steps:
  - script: |
      MY_TAG="$(Build.SourceBranch)"
      MY_TAG=${MY_TAG#refs/tags/}
      LastRelease=git describe --abbrev=0 MY_TAG^
      echo $MY_TAG
      echo $LastRelease
      echo "##vso[task.setvariable variable=build.my_tag]$MY_TAG"
      echo "##vso[task.setvariable variable=build.platform]$PLATFORM"
    displayName: "Create my tag variable"
  - task: GithubRelease@0
    displayName: Github release
    inputs:
      gitHubConnection: github.com_mrcryptot
      repositoryName: mrcryptot/mwc-wallet
      action: 'edit'
      tagSource: "Git tag"
      tag: '$(build.my_tag)'
      title: '$(build.my_tag)'
      assetUploadMode: 'replace'
      addChangeLog: true
      lastRelease: 'lastReleaseByTag'
      releaseTag: '$(build.LastRelease)'
